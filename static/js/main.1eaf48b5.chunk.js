(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{45:function(e,t,n){},46:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(18),c=n.n(o),s=(n(45),n(37)),i=n(8),l=(n(46),n(6)),u=n.n(l),d=n(9),p=n(1);function j(e){window.localStorage;if(-1!=window.location.toString().indexOf("code")){var t=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a,o,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a in console.log("here's your code ",t),n={client_id:"ec6a8d48-e814-4f0d-a777-bb8d6f37971b",scope:"user.read",code:"".concat(t),redirect_uri:"http://localhost:3000/",grant_type:"authorization_code",client_secret:"Anzq9DPt2Yc9mcBEd4xfo2MCc_.H_b-0~Q"},r=[],n)o=encodeURIComponent(a),c=encodeURIComponent(n[a]),r.push(o+"="+c);r=r.join("&"),console.log(r),{method:"POST",headers:{Origin:"http://localhost:3000/","Content-Type":"application/x-www-form-urlencoded; charset_UTF-8"},body:r};case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=window.location.toString().split("?")[1].split("="),r=(n[0],t(n[1]));console.log("od token: ",r)}return Object(p.jsx)("div",{className:"homeBody",children:Object(p.jsx)("h1",{children:"Rosewood Studios Online"})})}var h=n(32),m=n(33),f=n(40),b=n(39),x="https://personalprojectlawless.herokuapp.com/",O=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:"".concat(t),password:"".concat(n)})},e.next=3,fetch(x+"api-token-auth/",r);case 3:return a=e.sent,e.next=6,a.json();case 6:return o=e.sent,localStorage.setItem("token",o.token),e.abrupt("return",o.token);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),v=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,n);case 2:return r=e.sent,console.log(t),e.next=6,g(t,r);case 6:return a=e.sent,e.abrupt("return",{token:r,profile:a});case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)},console.log(n),e.next=4,fetch(x+"users/new-user/",n);case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json",Authorization:"Token ".concat(n)},method:"POST",body:JSON.stringify({username:"".concat(t)})},console.log("Init: ",r),e.next=4,fetch(x+"users/get-user-info/",r);case 4:return a=e.sent,e.next=7,a.json();case 7:return o=e.sent,localStorage.setItem("profile",JSON.stringify(o.data[0])),console.log(JSON.stringify(o.data)),e.abrupt("return",o);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={headers:{"Content-Type":"application/json",AUTHORIZATION:"Token ".concat(n)},method:"PATCH",body:JSON.stringify({first_name:"".concat(t.first_name),last_name:"".concat(t.last_name),email:"".concat(t.email)})},console.log(t.id),e.next=4,fetch(x+"users/users/".concat(t.id,"/"),r);case 4:return a=e.sent,e.next=7,a.json();case 7:return o=e.sent,localStorage.setItem("profile",JSON.stringify(o)),e.abrupt("return",o);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{AUTHORIZATION:"Token ".concat(window.localStorage.token)},method:"DELETE"},e.next=3,fetch(x+"users/users/".concat(JSON.parse(window.localStorage.profile).id,"/"),n);case 3:return r=e.sent,console.log(r),e.next=7,r.json();case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=n(34),k=(n(54),function(e){Object(f.a)(n,e);var t=Object(b.a)(n);function n(){var e;Object(h.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).currentdate=new Date,e.state={audioDetails:{url:null,blob:null,chunks:null,duration:{h:0,m:0,s:0}}},e.formData=new FormData,e.handleAudioUpload=function(){var t=Object(d.a)(u.a.mark((function t(n){var r,a,o,c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(n),r={method:"PUT",headers:{"Content-Type":"audio/mpeg",Authorization:"Bearer ".concat(window.localStorage.odToken)},body:n},a="".concat(e.currentdate.getDate(),"-").concat(e.currentdate.getMonth(),"-").concat(e.currentdate.getFullYear()),t.next=5,fetch("https://graph.microsoft.com/v1.0/me/drive/special/music:/test".concat(a,".mp3:/content"),r);case 5:return o=t.sent,t.next=8,o.json();case 8:c=t.sent,console.log(c);case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(m.a)(n,[{key:"handleAudioStop",value:function(e){console.log(e),this.setState({audioDetails:e})}},{key:"handleReset",value:function(){this.setState({audioDetails:{url:null,blob:null,chunks:null,duration:{h:0,m:0,s:0}}})}},{key:"render",value:function(){var e=this;return Object(p.jsxs)("div",{className:"recorderContainer",children:[Object(p.jsx)("div",{className:"recorderSpacer"}),Object(p.jsx)(N.a,{record:!0,title:"Record a Hit!",audioURL:this.state.audioDetails.url,showUIAudio:!0,handleAudioStop:function(t){return e.handleAudioStop(t)},handleAudioUpload:function(t){return e.handleAudioUpload(t)},handleReset:function(){return e.handleReset()}}),Object(p.jsx)("div",{className:"recorderSpacer"})]})}}]),n}(a.a.Component)),_=function(e){return Object(p.jsx)("div",{children:Object(p.jsx)(k,{})})},C=n(68),I=n(66),A=function(e){var t=function(){var t=Object(d.a)(u.a.mark((function t(n){var r,a,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),console.log(n.target[0].value),console.log(n.target[1].value),r=n.target[0].value,a=n.target[1].value,t.next=7,v(r,a);case 7:o=t.sent,console.log(o),window.location.replace("/"),e.history.push("/");case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"formContainer",children:[Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"formClass",children:[Object(p.jsx)("h1",{children:"LOGIN"}),Object(p.jsxs)(C.a,{onSubmit:t,children:[Object(p.jsxs)(C.a.Group,{controlId:"formBasicEmail",children:[Object(p.jsx)(C.a.Label,{children:"User Name"}),Object(p.jsx)(C.a.Control,{type:"text",placeholder:"Enter user name"})]}),Object(p.jsxs)(C.a.Group,{controlId:"formBasicPassword",children:[Object(p.jsx)(C.a.Label,{children:"Password"}),Object(p.jsx)(C.a.Control,{type:"password",placeholder:"Password"})]}),Object(p.jsx)(I.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(p.jsxs)("p",{children:["Not a member? click ",Object(p.jsx)("a",{href:"/new-user",children:"here"}),"."]})]})]})},T=function(e){return Object(p.jsxs)("div",{className:"formContainer",children:[Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"formClass",children:[Object(p.jsx)("h1",{children:"New User"}),Object(p.jsxs)(C.a,{onSubmit:function(t){t.preventDefault();var n={username:"".concat(t.target[0].value),password:"".concat(t.target[1].value),first_name:"".concat(t.target[2].value),last_name:"".concat(t.target[3].value),email:"".concat(t.target[4].value),files_user:[],projects:[]};w(n),e.history.push("/login")},children:[Object(p.jsxs)(C.a.Group,{controlId:"formBasicUsername",children:[Object(p.jsx)(C.a.Label,{children:"User Name"}),Object(p.jsx)(C.a.Control,{type:"text",placeholder:"Enter Username"})]}),Object(p.jsxs)(C.a.Group,{controlId:"formBasicPassword",children:[Object(p.jsx)(C.a.Label,{children:"Password"}),Object(p.jsx)(C.a.Control,{type:"password",placeholder:"Password"})]}),Object(p.jsxs)(C.a.Group,{controlId:"formBasicFirstName",children:[Object(p.jsx)(C.a.Label,{children:"First Name"}),Object(p.jsx)(C.a.Control,{type:"text",placeholder:"Enter First Name"})]}),Object(p.jsxs)(C.a.Group,{controlId:"formBasicLastName",children:[Object(p.jsx)(C.a.Label,{children:"Last Name"}),Object(p.jsx)(C.a.Control,{type:"text",placeholder:"Enter Last Name"})]}),Object(p.jsxs)(C.a.Group,{controlId:"formBasicEmail",children:[Object(p.jsx)(C.a.Label,{children:"Email"}),Object(p.jsx)(C.a.Control,{type:"text",placeholder:"Enter Email"})]}),Object(p.jsx)(I.a,{variant:"primary",type:"submit",children:"Submit"})]})]})]})},U=function(e){var t=JSON.parse(localStorage.profile),n={id:"".concat(t.id),username:"".concat(t.username),password:"".concat(t.password),first_name:"".concat(t.first_name),last_name:"".concat(t.last_name),email:"".concat(t.email)},r=function(){var e=Object(d.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),alert("Goodbye Account!"),console.log(JSON.parse(window.localStorage.profile).id),e.next=5,S(JSON.parse(window.localStorage.profile).id);case 5:window.localStorage.clear(),window.location.replace("/");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"formContainer",children:[Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"formClass",children:[Object(p.jsxs)("h1",{children:["Edit Profile ",n.username]}),Object(p.jsxs)(C.a,{onSubmit:function(e){e.preventDefault(),console.log(e),n.first_name=e.target[0].value,n.last_name=e.target[1].value,n.email=e.target[2].value,console.log(n),console.log(y(n,window.localStorage.token)),alert("Profile successfully updated. Returning to Home Page."),window.location.replace("/")},children:[Object(p.jsxs)(C.a.Group,{controlId:"formBasicFirstName",children:[Object(p.jsx)(C.a.Label,{children:"First Name"}),Object(p.jsx)(C.a.Control,{type:"text",defaultValue:n.first_name})]}),Object(p.jsxs)(C.a.Group,{controlId:"formBasicLastName",children:[Object(p.jsx)(C.a.Label,{children:"Last Name"}),Object(p.jsx)(C.a.Control,{type:"text",defaultValue:n.last_name})]}),Object(p.jsxs)(C.a.Group,{controlId:"formBasicEmail",children:[Object(p.jsx)(C.a.Label,{children:"Email"}),Object(p.jsx)(C.a.Control,{type:"text",defaultValue:n.email})]}),Object(p.jsx)(I.a,{variant:"primary",type:"submit",children:"Submit"})]}),Object(p.jsx)("button",{className:"deleteButton",onClick:r,children:"Delete Account"})]})]})},E=n(31),L=n(67),R=n(69),D=function(e){var t=Object(r.useState)(),n=Object(E.a)(t,2),a=(n[0],n[1],Object(r.useState)("")),o=Object(E.a)(a,2),c=o[0],s=o[1];return Object(r.useEffect)((function(){window.localStorage.profile&&(console.log(JSON.stringify(window.localStorage.profile)),s(JSON.parse(window.localStorage.profile)))}),[]),Object(p.jsx)(L.a,{bg:"dark",expand:"lg",dark:!0,children:Object(p.jsxs)("div",{className:"navContainer",children:[Object(p.jsx)("div",{className:"toTheLeft",children:Object(p.jsx)("a",{href:"/",className:"navA",children:Object(p.jsx)("h4",{className:"divA",children:"Stevecorder\u2122"})})}),Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"toTheRight",children:[Object(p.jsx)(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(p.jsx)(L.a.Collapse,{id:"basic-navbar-nav",children:Object(p.jsxs)(R.a,{className:"mr-auto",children:[Object(p.jsx)("a",{href:"/music",className:"navA",children:Object(p.jsx)("p",{className:"divA",children:"Music"})}),window.localStorage.profile?Object(p.jsx)("a",{href:"/profile",className:"navA",children:Object(p.jsx)("p",{className:"divA",children:"Hi, ".concat(c.first_name,"!")})}):Object(p.jsx)("a",{href:"/login",className:"navA",children:Object(p.jsx)("p",{className:"divA",children:"login"})}),Object(p.jsx)("a",{href:"/onedrive",className:"navA",children:Object(p.jsx)("p",{className:"divA",children:"OneDrive"})}),window.localStorage.profile?Object(p.jsx)("a",{onClick:function(e){e.preventDefault(),window.localStorage.removeItem("profile"),window.localStorage.removeItem("token"),window.localStorage.removeItem("msProfile"),window.localStorage.removeItem("odToken"),window.localStorage.removeItem("pkce_code_verifier"),window.localStorage.removeItem("pkce_state"),window.location.replace("/")},className:"navA",children:Object(p.jsx)("p",{className:"divA",children:"logout"})}):null]})})]})]})})},P=function(e){var t="ec6a8d48-e814-4f0d-a777-bb8d6f37971b",n="http://localhost:3000/onedrive",r="https://login.microsoftonline.com/common/oauth2/v2.0/authorize",a="https://login.microsoftonline.com/common/oauth2/v2.0/token/",o="User.Read Files.ReadWrite.All",c=function(){var e=Object(d.a)(u.a.mark((function e(a){var c,s,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),c=i(),localStorage.setItem("pkce_state",c),s=i(),localStorage.setItem("pkce_code_verifier",s),e.next=7,h(s);case 7:l=e.sent,d=r+"?response_type=code&client_id="+encodeURIComponent(t)+"&state="+encodeURIComponent(c)+"&scope="+encodeURIComponent(o)+"&redirect_uri="+encodeURIComponent(n)+"&code_challenge="+encodeURIComponent(l)+"&code_challenge_method=S256",window.location=d;case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(e){if(""==e)return{};var t=e.split("&").map((function(e){return e.split("=")})),n={};return t.forEach((function(e){return n[e[0]]=e[1]})),n}(window.location.search.substring(1));function i(){var e=new Uint32Array(28);return window.crypto.getRandomValues(e),Array.from(e,(function(e){return("0"+e.toString(16)).substr(-2)})).join("")}function l(e){var t=(new TextEncoder).encode(e);return window.crypto.subtle.digest("SHA-256",t)}function j(e){return btoa(String.fromCharCode.apply(null,new Uint8Array(e))).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function h(e){return m.apply(this,arguments)}function m(){return(m=Object(d.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:return n=e.sent,e.abrupt("return",j(n));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return s.error&&(alert("Error returned from authorization server: "+s.error),document.getElementById("error_details").innerText=s.error+"\n\n"+s.error_description,document.getElementById("error").classList=""),s.code&&(localStorage.getItem("pkce_state")!=s.state?alert("Invalid state"):function(e,t,n,r){var a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),a.onload=function(){var e={};try{e=JSON.parse(a.response)}catch(t){}200==a.status?n(a,e):console.error(a,e)},a.onerror=function(){r(a,{})};var o=Object.keys(t).map((function(e){return e+"="+t[e]})).join("&");a.send(o)}(a,{grant_type:"authorization_code",code:s.code,client_id:t,redirect_uri:n,code_verifier:localStorage.getItem("pkce_code_verifier")},function(){var e=Object(d.a)(u.a.mark((function e(t,n){var r,a,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n.access_token),window.localStorage.setItem("odToken",n.access_token),r={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(window.localStorage.odToken)}},e.next=5,fetch("https://graph.microsoft.com/v1.0/me/",r);case 5:return a=e.sent,e.next=8,a.json();case 8:o=e.sent,window.localStorage.setItem("msProfile",JSON.stringify(o)),console.log(o),window.location.replace("/");case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())),Object(p.jsxs)("div",{className:"odButtonContainer",children:[Object(p.jsx)("div",{}),Object(p.jsxs)("div",{className:"formClass",children:[Object(p.jsx)("h1",{children:"OneDrive"}),Object(p.jsx)(C.a,{onSubmit:c,children:Object(p.jsx)(I.a,{variant:"primary",type:"submit",children:"Sign In to OneDrive"})})]})]})};var B=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)(s.a,{children:[Object(p.jsx)(D,{}),Object(p.jsxs)("div",{children:[Object(p.jsx)(i.a,{exact:!0,path:"/",component:j}),Object(p.jsx)(i.a,{exact:!0,path:"/music",component:_}),Object(p.jsx)(i.a,{exact:!0,path:"/login",component:A}),Object(p.jsx)(i.a,{exact:!0,path:"/new-user",component:T}),Object(p.jsx)(i.a,{exact:!0,path:"/profile",component:U}),Object(p.jsx)(i.a,{exact:!0,path:"/onedrive",component:P})]})]})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,70)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))};c.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(B,{})}),document.getElementById("root")),J()}},[[64,1,2]]]);
//# sourceMappingURL=main.1eaf48b5.chunk.js.map